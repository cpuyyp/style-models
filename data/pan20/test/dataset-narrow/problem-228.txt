I asked question in very blurry manner because I cannot explain in short sentence what is my problem about. In general I have a set of procedures which transforms text and XML. Inside the procedures I have a lot of and variables and a table with column. Inside my data I have special letters (for example ). When I run all the code the special character disappears and is visible as - which mean that I got instead of . In general I got everything ok until the final steps. I got which call stored procedure with ad hoc constructed variable of type . I have into a table which contains field. In this case I got . If I run procedure manually (not in ) I got proper symbol. Any ideas why this happens? I checked all variables and they are . 

This is the better approach if you need make a lot of queries on Player and list of his friends (this will give speed of queries). If you just need list of names, the other approach is also possible. So you have to think and decide which is better approach for your needs. 

REMARK: I edit "causing error" part because my colleague put a protection check. I remove that part to show the original state of the function (The source was: The call that causes error: 

Please check if the query gives correct results. I presume that you don't have 2 equal emails in the same list. Otherwise in some cases the calculations will not be correct. 

I need to make script of XML schema collections in my Database and then insert each xml inside a table field as string. I need to do this to compare current schema collections with the new schema collections after it is regenerated. I have no idea where to start! 

MY PROCESS IS FOLLOWING: 1. I make several backups of the Database (Full, File Group and TLog backups). 2. I set DB to (to allow removing read-only of historical file group flag by script). 2a. I remove flag of my Historical File Group. 3. I set DB to to allow normal operation of our software. 4. I update partitions so the data is moved the the historical file group. 5. I repeat steps 2, 2a and 3 in so I can set historical file group READ ONLY again. 6. I make backups again. Does anyone have idea why I receive that error? EDIT: We receive the same issue during the different phase of the procedure. This is the only situation in which mirror breaks down so I suppose the problem is inside the procedure, but I can not figure out why! 

I have no idea what can be the problem. Can anyone give me some direction where to search? In general I have SQL Stored procedure inside which in Clause I call . The function gets 2 strings: one for and other for an make validation. The function is called many times in the query. EDIT: ERROR message: 

Sorry, may be very stupid question but what is the difference between SQL Server 2012 SP4 and SQL Server 2012 SP3 + CU-10? 

Fisrt optimizer takes one of best plans - not the best. This is because when the optimizer works the time for calculating the best plan can be bigger than the time it saves during the execution. And yes, optimizer works based on statistics. So if your statistics is old enough optimizer will create plan suiatble for that statistics - i.e. for the moment of time when the statistics was last recalculated. As far as I know the plan also depends on the amount of data that you have. 

As far as I know - NO. On iMac you can use emulator software, but on iPad there is no such possibility. 

I think that it is not good to uprgade only SQL Server. 2005 is out of support so I think you need to upgrade SSRS also. If you update only SQL server you must check you apps, bacuse there are some issues with SQLs between versions. For example we use SQLs generated in concatenated strings and we have some issues when upgrading from 2000 to 2008. In any case you must make test how apps work with the new version the new version. So my answer is NO. 

If you are using SSMS then this answer is for you. I have similar problem when the script have several sections. For Example if you have section then you have shift. But when you click an error you are usually relocated on the place where is the error. So never is not true, but sometimes don't match. And yes, those are lines inside the script - not in the (books online) or some else source. For you have Error number. 

If we use instead of then I receive error, because I try to convert to - this is correct. The problem is that obviously function behaves differenly which is a big issue. 

My colleague ask me very simple, but difficult for me question: If I have table with 10 records in trigger and I delete 8 of them how many records will I have in table in trigger? I think it wuold be 10, but I am not sure. 

P.S. If the question is unclear please let me know via comment. EDIT2: This is the full text of the function: 

I need to return partial result (as simple select) from a Stored procedure before it is finished. Is it possible to do that? If yes, how to do that? If not, any workaround? EDIT: I have several parts of the procedure. In the first part I calculate several string. I use them later in the procedure to make addtional operations. The problem is that string is needed by the caller as soon as possible. So I need to calculate that string and pass it back (somehow, from a select for example) and then continue to work. The caller gets its valuable string much more quickly. Caller is a Web Service. 

Of course the code above is not working because I use derived table, which is not updatable. I don't figure out right now how to update. If I use simple CAST without derived table I still get error. 

With backup you have all data. Of course you can generate script for data, but for a DB with 1-2 GB the script will be very big and will execute long time. The best way in my point of view is method. It will preserve the current state of the DB. Of course you can make backup before that. In that case you also have to take into account downtime for transferring database between servers. 

This will show all campaigns with all emails lists for each campaign. It will show also campaign with no emails list. You can add or remove fields in the select as you need. 

We found the issue. It is a bug in SQL Server. When we set the command is not transfeered properly into the DB. When script start change on the mirror server an error occured. After that the syncronization is ruined and the DB on the mirror is locked (in state). We fix the issue by updating SQL Server to the latest version (our initial version was wiout SP). 

You can achive this by creating table. In that table you can store all changes from those tables. You have to use to populate data in table. Take into account that if the history table stores all changes you need engine to populate it. Another approach is to have table for each table that you want to observe. In your case . You have to decide when you make design what amount of such info to keep. Of course you can just remove all that columns if you don't care about the info they store. 

I dont know if this question is asked - I found similar question - How to enable intellisense, but my case is little different. We have 2 SQL Servers 2012 - one is in the other room, other is in our Data Center. When we write a query on our "next door" SQL Server intellisense working perfectly. When we write a query on out DC SQL Server intellisense is not wokring - in a new window it works from time to time and does not underline wrong table names. In a window with big script does not working at all. The DC server is newer version. SSMS lacks SP. What can cause such issue? Any ideas? 

I have engine is SQL which uses to run stored procedures. I do that because I need dynamically determine which stored procedure to call and to prepare parameters for that procedure. And I need that logic to be present. So is this a good way to call stored procedure or I have to use or there is another way? I ask this question because I have two timings - 1st is to prepare and to call procedure and call another small procedure and 2nd is the execution of the called procedure itself. It works fine almost all the time - the timings are very close. But from time to time I got huge difference between them - the 2nd timing is the same, but 1st is several times bigger (for example 3ms vs 90ms). I suppose some compilation takes place, but this stored procedure is executed very often. REMARK: I call from , not from . Here is the code how inner SP is called: 

First approach is the SQL approach. You need to make modification though. The relation that you are describing is called - each player can have each other player as friend. To achieve this you need a separate table which connects player with his friends (you just need 2 IDs): 

I have one main database () and several client DBs (). I need to start query in and to get data from . The client DB can be found also on linked server. My problem is that I need to do this in a function with , so I can get , but this in not allowed by SQL Server. Is there another way to do that? I need to have code like inside the function: 

Is there a way to declare as variable inside a construct: ? I need to make quick validation of using schema which is declared as variable. I suppose there is no way, but I have to ask. If someone can propose some workaround it will be very helpful also. 

I experienced very strange problem today with TSQL function. The function has several parameters (int and bit). One of the (int) is set with value NULL. When calling a function with NULL inside the params function return ERROR (the error is ok, because I try to convert to value). When the function is called with param @p1 which value is the function is working. Can someone explain to me why it works like that? We are using: 

EDIT 2: I find the problem. When we used to validate , we sned 1st parameter to be the name. Then in the we extract schema from SQL Server. In our case we have empty string for name, but even we have the error is passed upwards the SQL Server stored procedure. Our function returns so the recors with 0 must be updated with error code. But in this case we receive exception in SQL. My code is: SQL for Update 

Create a new DB called SERVICE, MAINTANANCE, etc. Inside it create a stored procedures for different steps - drop old DB, create new DB, populate new DB. You can make all that in one procedure also. Create one procedure which will execute others - step by step (if you not implemented all logic in one procedure). Creata a job with permissions - inside it strat main procedure. Or tell DEV team to use main procedure inside new DB (with appropriate permissions). 

One more very simple solution: use notepad++. Inside there is very good plugin called Poor man's sql formatter. The drawback is that you have to paste inside the . But it is free. There is also a web page, but I did not try it. 

As far as I know, even you have 2 database files to take advantage from partitioning you must create partitions (this feature is available only in of SQL Server). Each partition will be in different file. No Archived will be in file. Others will be in . The process is automatic, so there is no need to change any SQL queries. So if configured properly the data will be automatically set in propper place. Take into account that the filed for partitioning must be clustered index. As other recommendation - you can set filegroup with archived data to be . this will speed-up the queries. The problem is that you have to set procedure that periodically archives data - set partition to , updates records for archiving and sets file to again. Take into acoount that when you have partitoning with the backup procedure will be complex. 

REMARK: I executed this operation on the old server many times automatically and I never experience such error. ON MIRROR SERVER: ROW 1 in LOG: 

I have a query to compare data between my local SQL Server and linked SQL Server. My problem is that the table I compare contains XML column. I get: 

I don't know how to fix this, because I don't show this column inside the select statement. I though that I can , but when the column is not in the select list what to cast? I see that there is workaround with cast by I can not. So may be I miss something. Any ideas? My test code looks like: 

My environment is the following: VMWare 5.5 vitalized server MS Windows Server 2008R2 Enterprise domain and SQL Server 2008 R2 Enterprise. Centralized storage with fibre-channel connection. I have partitions in my . I have 2 : one with live data (FG1), second with historical data (HDG). The second file group is . Each month I make movement in partitions - I add new data (from previous month) to historical data. This process is automatic. We moved our database to a new server. Initially, I had to do the process manually. During this operation my mirror breaks down (after operation 3 - see process flow bellow) with the following error: ON PRINCIPAL SERVER: ROW 0 in LOG: 

I need to validate XML using XSD inside TSQL. To make this task semi automated I need to do this inside TSQL function. To make validation I have to set value to XML and if it is not valid I will receive an error. My problem is that inside the TSQL function I can not use . Is this the propper way and if it is even possible to do this? 

You update column inside the . It refferences inside the view. From the code of the we see that you update table (). Seeing that you have 2 columns and you have ID \ Name structure of the table. Inside the view you show . So you update name inside table. This is the reason for . When you refresh the view you see new string inside multiple rows inside the view. 

I do that using . You can export data from SQL job and then you can zip using that stored procedure. The best way is to run a bat file for zip. REMARK: to use that sp you need that it is allowed (on SQL Server level) and you must have permissions to run it. 

Instead of making zip file of the backup use option of command. It will compress backup and you can use it directly for restore (skipping unzip step). It is supported from SQL 2008 onward (I see you have SQL 2012) and the compression is very good (compared to compression ratio / speed). See BACKUP command for more details. You can check the compression ratio here. 

You need your answer to be an application - this is too broad. I try to give basic idea. You need one form which will be saved to the database each time a person fills the list. It must contain 1 text box for Persons names. One List with all cars that are on the show and one empty list. And 2 buttons - and . For each new person operator write his name of the person. Then operator selects cars from fisrt list and transfer its to the second. This can be done by double click or by selecting a car and pressing additional button. This must work in the opposite direction too. Then when pressing button the data will be saved inside database and the form will be reset - first list will contain all cars from the show, second will be empty and text box will be empty. If operator presses button the form will be reset without saving data to database. You can try serach internet how to implement those lists in MS Access 2010.