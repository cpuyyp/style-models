TCPReplay can be used to replay UDP traffic from a filtered and exported packet capure. Note that it will not work with multiple TCP streams due to issues with the sequence numbers. You may also be able to get this to work with netcat. Unfortunately, there is not yet a way to do multiple TCP streams, but fortunately that is not an issue for you. 

On SonicWALLS, in version 5.x (and 6 too, I imagine) this is known as "Interface Trust". To adjust this setting, go to Network -> Zones and check the box to "Allow Interface Trust" to resolve this issue. I will caution you however that if you are using the WLAN zone which has interface trust disabled by default, and you are using a SonicPoint with version 5.x you are doing it wrong. The wireless configuration of SonicPoints is extremely arduous and I cannot disrecommend this product enough. If you can return these, do. They are a major headache. I love their firewall, but hate their SonicPoints. To properly configure them, the SonicPoints should be the only thing in the WLAN zone which should be on an untagged VLAN. You should then create another zone (with interface trust enabled). You then need to go to Network -> Interfaces and click "Add Interface" and create an interface with a VLAN tag other than 1 with a parent interface of whatever the SonicPoint is plugged into and you need to select your newly created zone. Next, navigate to SonicPoint -> Virtual Access Point and create a Virtual Access Point Group (VAP group) and then create a Virtual Access point. The Virtual Access Point (VAP) needs to be set to the same VLAN tag you used earlier. Then you need to edit the VAP Group and add the VAP to it. Finally, you are ready to go to SonicPoint -> SonicPoints and edit the SonicPoint in the middle section. You then can assign the VAP group to the WAP. You will also need to ensure that the WAP is either plugged directly into the SonicWALL or that you have a switch that supports VLAN tagging. If you go the switch route, you need to have the untagged VLAN assigned to the port you connect the WAP(s) to and tag or trunk each of the VLANs on the port on the switch using the same VLAN tag/number you used on the SonicWALL - otherwise you will run into issues. If you need to connect more than one WAP directly to the SonicWALL, you can use PortShield groups to have 2 ports on the same WLAN zone. If you do not do this, you will find weird issues like being unable to talk to the other computers on the network, but getting internet access or getting spotty internet access which will work great for awhile and then drop out all of the sudden inexplicably. Finally, you should note that you will need to configure firewall rules between the zone you created and the LAN zone in order to talk to your wired printer and other devices on the LAN. You should also note that you will be unable to discover that printer automagically using Windows because the WAP is not on the same zone as the printer (no matter what you do) and that Bonjour (if you use a mac) will not discover properly unless you configure multicasting and adjust some other specialized settings in an advanced configuration page and configure mDNS in IP Helper. You may also need to make some special adjustments for IPv6. You can however specify the IP address manually to print to the printer. 

Buffing up on Frame-Relay for testing EIGRP nuances over FR for CCNP - topology and relevant show command output here: $URL$ Relevant PVC is between DLCI 103/301 (R1/R4) Why does R4 send echo replies to 192.168.123.1, when I ping from R1?? I know that if I source the ping from s0/0.103 it is successful, but I don't understand this conceptually. I figured when R4 ARP'd for 192.168.123.4 it would receive the DLCI 103 and the combination of the map in R2 and route in R4 would get it to where it needed to go, but I'm clearly missing something. Thanks in advance! 

Situation: We have a 3750 with a monitoring session setup on it, grabs a few VLAN's running over the switch and has a destination port on that device (normal SPAN not RSPAN). Historically speaking - that destination port had a 1GB cable plugged into it connecting down to a 3020 (in the back of an HP blade chassis), and hosts in that chassis could be set with a promiscuous NIC to monitor the network. The 3020 has lost it's config. How do I set up the port on the 3020 to pass the SPAN traffic? Very curious about this because I had thought RSPAN was needed for a setup like this, but it's worked for years in the manner described above with regular SPAN. 

Kind of an odd question, I know. Is it possible to replace the source IP address in outbound ICMP "Time Exceeded" packets on a Cisco 2911 router? I have multiple IPs bound to the primary interface, as well as IPs on the secondary interface that act as gateway IPs for the local network that the router also responds to on the Internet. What I'd like to do is replace the source IP address in outbound ICMP "Time Exceeded" packets so that, when a traceroute is conducted, the IP address I wish to appear to the Internet as (a secondary interface's IP address) is shown. For instance, when a traceroute is done to any machine on our network, the IP 1.2.3.4 is shown as one of the hops as that's the primary GigabitEthernet0/0 interface's IP address. I would like 2.3.4.5 to show instead (an IP assigned to GigabitEthernet0/1 and reachable from the Internet). The only way I can think of doing this is to alter the IP address in the outbound packet. Does Cisco have this functionality? Is it possible to alter that IP in transit, for a particular type of packet? Thank you in advance! 

It's filtering out all of the routes originating from AS1 (meaning that downstream, that router can no longer use AS3 as transit to AS1 - breaking my use case). What am I missing here? 

Once we answer the question of why I can't see some of these drops. I would like to know why these are getting dropped in the first place. I've already tried things like setting the service-policy to global, setting the inspection policy in the default class, or setting inspection globally, all with the same results. Ultimately though should inspection of icmp and allowance by ACL not account for everything? 

A customer has a network: 10.0.0.0/24. The gateway 10.0.0.1/24 is represented by an SVI for VLAN 10 on a core switch. Downstream there is an ACE Load balancer, which has a BVI. This BVI's IP address is 10.0.0.4/24 and bridges two VLAN's 20 and 30. New applications are all build in the same /24. The VIP IP allocate for these new apps also is assigned from the same /24. As an example: 

Your router knows where to route traffic because it maintains a table of stateful connections which are source IPaddress:port and destination IPaddress:port relationships. These are established based on your firewall rules, NAT policies, and a few other settings (like TCP and UDP timeout). There are 4 possible states: NEW, RELATED, ESTABLISHED and INVALID. Based on your firewall rules, your firewall determines what state a connection should be in. So typically, you can make NEW connections outbound by default, but only RELATED or ESTABLISHED connections are allowed inbound if you create a NAT or PAT rule and matching firewall policy to allow this. Then, either based on the rules you have configured (for the case of a NEW connection) or the existing connection table (for the case of an ESTABLISHED connection) a packet will be allowed or disallowed through. Furthermore, an [ARP] table is maintained which helps to firewall to know what physical MAC address an IP address corresponds to. 

How does this work (It does by the way)? Specifically from a tagging perspective, how is it possible for the traffic to move from the endpoint through the LB and the core successfully? Again, the only bridging is internal to the LB, not between the LB and anything else. 

4 routers, lab environment. Trying to filter out routes originating from AS2 (not that leverage AS2 as transit). The process I've followed is: 

I have a workstation in a branch office, there is a WAP about 10 feet overhead and down one row he should be connecting to. Unfortunately, his workstation is repeatedly connecting to another WAP in another wing of the building. What does one do in this situation to ensure his workstation is joining the most optimal WAP? Equipment involved are Cisco AIR-1142's functioning autonomously w/ no WLC. 

I have a Nortel Baystack 5510-48T (firmware says Avaya, but hardware says Nortel Networks). I currently have three different VLANs: VLAN1 - management VLAN and also a VLAN, connected to a Cisco providing Internet access on a gigabit drop, that has all my Internet-facing NICs plugged into; is physically connected into VLAN2 so that LAN IPs can access its management telnet/web service; VLAN2 - internal network LAN (10.0.0.x); VLAN3 - Connected to a secondary gigabit drop, has VPN device plugged into it as VPN is on another IP block/circuit, with the VPN device also having a ethernet cable plugged from it into the VLAN2 network. Right now I physically have the management network physically plugged into via an ethernet cable the LAN so that I can access it from the LAN (and by way of VPN). What I want to do is make it to where the management port, port #1, is on its own VLAN (the management VLAN) but also is a member of the LAN VLAN (VLAN #2). It currently has a LAN IP address (10.0.0.254) and, again, is physically connected to the a LAN VLAN (VLAN #2) port. Is there a way to have a single port be a member of two VLANs? I know I could set it to where my management network is also the same as the LAN VLAN (VLAN #2), but I'm sure there must be some way to have a single port belong to more than one VLAN. What can I do? I have full CLI access and am not afraid to use it. 

A branch office has a small 2950 in front of their PIX firewall (so failover can plug into it. The upstream router (owned by teleco company) only has one input port). I'm attempting to manage the device remotely. The PIX is the gateway for everything in the office: 10.1.128.254 The switch has management setup: 10.1.128.249 I've added ACL allowances for remote management (SSH), and a static route specifically for managing this device. Doing these two things has allowed me to be able to ping the device (from the PIX) but not from machines on the inside.. Remote access via SSH (putty) still unsuccessful. I've packet-traced from inside to 10.1.128.249 and nothing is preventing this communication that I can see. Thanks in advance all! EDIT: Assume that I cannot connect this to the internal network (physically). 

I'm not quite sure what you're asking, but I'll try anyway. I believe you got the output confused, and the commands shown in the question are inconsistent as it is apparently from two separate routers. COMMANDS ON ROUTER #1 - appeared to be IP 162.243.188.2: The first output you show us shows two AS numbers: AS393406 which is the AS of the IP 162.243.188.2 (which is shown in the output), and AS1299 which is the network that is announcing 2.22.0.1 (also AS34164 announces it, but it's less specific as 34164 is announcing it within a /13 but 1299 is announcing it within a /22). COMMANDS ON ROUTER #2 - appeared to be @ University of Oregon: The second output shows what appears to be a traceroute from a DIFFERENT router than the first. This time it's at the University of Oregon on AS3582. It then travels down the Internet, until it reaches AS1299. The question you asked was why AS3356 shows up before AS1299 in the traceroute, because the first output showed AS393406 before AS1299. That is not true. The two numbers shown were the starting AS - servicing 162.243.188.2 on AS393406 - and the destination AS, AS1299 servicing 2.22.0.1. The AS3356 you see in the traceroute is the last AS your packet hops through before reaching the destination network's (Akamai) AS at AS1299. SO, I THINK what happened is you confused the output. That first output of two AS numbers were showing the beginning and the end ASes in the route. Also, you apparently had two separate routers issuing the commands as one appeared to be on Digital Ocean and the other at University of Oregon.