How many IPSEC Phase 2 SA's can exist for a given VPN tunnel before performance becomes an issue, and at this point what causes the performance issue? This is posed because I've always asked about specific configs vs specific configs for VPN and which is more efficient and I want to be able to answer this myself based on some real data. I'm hoping to get feedback from people with more robust VPN backgrounds, who can say - through experience - I see performance drop after X phase 2 SA's, and here's why - so that I can then take this and create my own plan for good crypto ACL's. 

The culture at one of our main branch offices is very open and loose. Historically when people have needed more ports in their space they could just grab a switch from someone with access to our equipment room and this was OK with management. This is not OK to me. I have about 30 small desktop class switches of various flavors which connect up through patch panels to primary access level gear like Cisco 3750's. I want to centralize distribution of small switches and prevent undocumented sprawl, but need advice on the best way to approach this. I considered going into each desktop switch, shutting down all not-in-use ports and then restricting the in-use ports to a single MAC. The problem is not all of the desktop flavors support this as readily as port-security on cisco enterprise devices. I considered doing the port-security upstream at the 3750's but overall I wonder how larger offices handle this kind of problem and if there's an easier way to track if a new switch has been plugged in somewhere without proper authorization? Thanks in advance! 

I would first check that you correctly have the 'nexus-startup.cfg' in your TFTP root folder, so that it's not a path issue. I suggest this because the uri error your getting would suggest the path is not found. Also - you'll need to address your syntax. Following from Nx-OS contextual help: 

Where the RFC1918 address is the source, and 8.8.8.8 is the destination. This command is used to verify rule input and assess which rules a given flow is either being allowed or denied by. 

Under what conditions are IPSEC P2 SA's built, broken down, and/or re-created? I'm trying to root out the science under the phase 2 SA creation and mechanics so I can answer for myself what is the most efficient way to design our VPN tunnels. I always get subjective answers when I've asked before, so I'm coming at it different asking about HOW they work at a granular level. Thanks in advance. 

Just got asked today about implementing two factor authentication for users of SSLVPN within our company (connecting via Cisco AnyConnect we don't support/use WebVPN). Currently we use LDAP for authentication. I've identified a company that integrates directly with anyConnect and the mobility client to afford token based two factor authentication, but was wondering what are more common ways of implementing two-factor in this sort of setting? First thing that came to my mind was Google Authenticator or RSA, but finding information on these types of setups in conjunction with AnyConnect was surprisingly hard to find (I found nothing .. in fact) 

Prepping for CCNP - In my topology the path R1 takes to a Loopback Ip is via R2 by default. My goal is to have a feasible successor route through R3. I've attached a diagram of topology. $URL$ Problem is: R1 only has one entry for the loopback ip of 3.3.3.3 in it's topology table. When I look at R3, it has two entries for this network, but somehow it's not sharing it.. I had planned to manipulate delay to add the FS route in R1, so I tried that on all links from R3 to the loopback (reduced delay to 10 usec), and for one update I saw R1 have both entries.. after another update though it removed it.. My understanding was that even if it wasn't a FS the topology table (using the 'detail' switch) would show all possibilities? What am I missing? 

Pinging from one SRC to a few DST's I can see some drops happening on my captures for some attempts and none for others. Wondering how I can see what's really happening to ALL of the arriving icmp packets outlined in my tests below. Thank you! Topology: 

Looking to get some insight from guys in the service provider space. The question is straightforward: If you're in a provider environment, and lets say you have 10,000 customers, each with their own environment (say IaaS/racks in a colo) - How do you segregate all of those customers efficiently. Private VLAN's, mpls, etc etc.. The second part of the question from those with extensive SP experience, is is there a relatively standard way you see people doing this, or if there are a million ways to skin this cat is it really just a matter of opinion on how providers achieve the goal of managing each customer network. 

Any other best practices when swapping line cards on the 6509-E you may have please feel free to share via comments. Finally - if the community feels this should be broken into separate Q's let me know and I will take care of it. 

I'm trying to test ACL's coming inbound from a remote peer site (using packet-tracer) (IPSec site to site VPN) and I wanted to know what interfaces ACL's are checked in this case and which interface I use for packet-tracer command? If incoming IP's are coming in over a site-to-site tunnel do they hit the inside interface's ACL's? Thanks in advance! 

I have a service object group of type 'tcp-udp'. When creating an ACL based around this, I don't have the option of type 'tcp-udp'. I'm trying to figure out what the point of tcp-udp groups are, if at the end of the day you still have to make two ACL's one for tcp and one for udp. Is there a way to make one ACL for groups of this nature.. for instance: 

While most networking equipment has the ability to see interface statistics (like traffic over a period of time), these counters are generally used for troubleshooting or while you're actively in the switch. For longer term data from an interface like what you're looking for I strongly suggest a monitoring tool that utilizes SNMP for the job. Mirkotik has a specific example using MRTG here: $URL$ I find this example to be overly complicated but not knowing your environment it's hard to say what you will think. Personally I suggest, a free tool if you only have this one use case, like PRTG which can be downloaded for free, and remains free unless you monitor more than 30 things with it. $URL$ Once you have your tool of choice installed, setting up SNMP can be as simple as setting a community string, and setting a target for SNMP traps. Details on configuring SNMP for your device are here: $URL$ If you have need of more monitoring than just this one interface, you may want to investigate other tools to fit your specifications. 

The answer (verified by Cisco VPN specialist) is Number 2. The crypto ACL's and NAT are bi-directional by default assuming your outside interfaces are static. 

We have some new 2960's inbound and I had a 2950 laying around. Was wondering if I loaded the 2960S IOS onto it (to get the config setup ahead of time) if there would be any permanent negative impact outside of the device not booting properly? Is there an easy way to recover from this situation if that happens? Can I create config on say 12.4 on the 2950 and just copy/paste into the new switch (2960 running likely 15.X) or will that cause problems? Thanks in advance! 

I've got monitoring setup on several devices in our office. The ping response time to small access switches is commonly 1-4ms... As of 3AM this morning, this has sky-rocketed to 300ms on average. Where does one start looking in a situation like this? What things can I observe in the switch to find the source of latency? NOTE: It's not load related.. all the links bandwidth usage is normal and unaffected, most links are very under utilized. Also - monitoring is local to the devices reporting the latency so there is no WAN factor here.