I'm experiencing high Signal Wait percent while CPU utilisation is very low at one of our servers. I have gone through numerous articles online about Signal Waits and understand that it is the time spent on the runnable queue however I'm still having difficult time to understand why CPU usage is staying so low (25%) while Signal Waits' percent is high (band of 75-90%.) If a session is waiting for an available CPU to run it, why is CPU utilised so low? 

but not the step's failure message (Step Id > 0 in the Job History). I also want to see the step's message so that I can identify the root cause directly from looking at the mail. For example, step 1's message in the above example. Is it possible to include a job step's failure message within the alert mail? 

I have a strange behaviour on one of my SQL Server's tempdb. It has six tempdb files, according to SSMS and queries, all pointing to S directory. Each of them have ~5gb of initial size. The weird thing is S is quorum actually with only 2gb of free space. Tempdb files simply don't exist in S nor in its sub directories. The question is where are the tempdb files? :) How can I physically see them? Thank you. 

It was all down to collation of the column. It was different from the database's (and the table's) collation. Now changed the column's collation to database's and no more implicit conversion shows up. Have no idea about the internals and why it caused the problem. 

I have a database with 5 .ndf (secondary) datafiles on SQL Server 2008 R2. (Each of these datafiles is assigned to a separate filegroup.) I want to know what data is there in those files. Is it possible? I know there are full text indexes in these filegroups (and since there is only one file per filegroup maybe the sole purpose of creating this many files were to place full text indexes in different filegroups, I don't know). I want to make sure there is no data other than full text indexes. Thank you 

Record count is the same but there is a big gap between the two in terms of space used. sp_spaceused shows 7.691.344 KB as reserved while the report shows 4.340.216 KB. Which one is correct? 

I have a full text index defined as 'Automatic' radio button checked on in its Catalog. When I modify a word in the full text indexed column, the new word appears in the sys.dm_fts_index_keywords but the old,updated value does not disappear and still shows in the list. It is also true when a word is deleted from the column as well. When I rebuild the catalog though the old (or deleted) word drops off the list. It looks like full text indexes does not honour deleted words. Why would that be? 

Please can anyone help me in resolving the deadlock of which details and screenshots are given below? Occasionally, two stored procedures are resulting in a deadlock. I was able to pin down the statements that caused the conflict. Only one table and one clustered and one non-clustered index is involved. For demonstration purposes, I renamed the table and indexes in a test environment. How can I avoid this deadlock? Thank you 

One of our developers with blanket privilege on a database wanted to create a regular user mapped to a login when what he mistakenly created was a user without login and now I'm unable to remove the user. command runs forever with no result nor an error. The user doesn't own any schemas as well. How can I remove this user? Thank you 

I'm trying to write a query which replaces the special characters with space. Below code helps to identify the rows. (alpha-numeric characters, comma and space is valid): 

Recently I logged myself as a different user (testUser) but now that user seems to be persisted in the drop-down menu of connection dialogue box and I couldn't find a way of getting rid of it. Even worse, it seems to be the default login as whenever I change my connection I have to go to the drop-down menu and choose my usual user otherwise the connection will be made in testUser's context. How can I get rid of testUser from connection dialogue box? Thank you. 

We have a reporting query which is erratic in terms of execution plan and run duration. It is either 5 seconds or as slow as 5 minutes. The query is a Select statement with no DML involved. One thing I noticed is the costly Eager Spool operator after an index scan in slow executions. However, index seek is used when executing fast. I updated the stats but it didn't help to speed up. I was just wondering why sometimes optimiser chooses to use Index Scan (and Eager Spool) rather than Index Seek and what causes it to do so? Attaching SS of both slow and fast execution plans. SS is saved as a file from Plan Explorer so may upload some other tabs if need be. Thank you Edit: The query runs fast in the mornings, slow in the afternoons, always. 

Can you please help me in querying the plan cache in order to see which queries perform a scan and which queries perform a seek operation for a particular (nonclustered) index? I'm on SQL Server 2008 R2? 

My full back-up starts daily at 02:00 AM. It takes about 3 hours. I also take T-Log back-ups every 15 minutes (at 15,30,45 and 00 hours). I can verify the LSN sequences of T-log backups when I "restore headeronly". However, there seem to be a gap between the last LSN of the full backup and the T-log backup taken immediately after backup had started (i.e 02:15) Below is restore headeronly output from the full backup started at 02:00 FirstLSN: 76583000073086500011 LastLSN: 76595000084143900001 ...and this is the restore headeronly output from the log backup started at 02.15 FirstLSN: 76570000086250400001 LastLSN: 76571000009693900001 Shouldn't the last LSN of the full back up and first LSN of log back up be the same? I compared the LSNs of the log back up taken at 05:15 and 05:00 (when the full back up has finished) but there is no sequence again. I also checked RESTORE FILELISTONLY of the full backup and CreateLSN, DropLSN of log file is 0. What is it that I might be missing here? Thank you. 

How can I integrate the replace function into the select statement so that all characters other than alphanumeric, comma and space in the result set are replaced by ' ' (space). This one won't work: 

We are migrating our SQL Server 2008 R2 to another physical server. For this, I will script out all jobs and run it on the target server. My question is about handling the schedules: When a job is scripted out, there is a parameter called of type uniqueidentifier for the step . Should I include or remove this parameter from the script? Is this value specific to the original server and therefore should not be included? If so, how can I create the matching one on the target server? Thank you. 

What are my options in moving result of a query in one server to another table on another server? Data contains ~400.000 rows so it won't be a quick one. (Both of them are SQL Server 2008 R2) Thanks all. 

I want to schedule a Full Text Index's population to keep it more up to date rather than leaving it to Automatic and not knowing the next population time as the users are complaining about the data they enter would not show up until too long a time has passed. For this, I right click on the table on which Full Text Index is defined and go to Schedules. It asks to choose the "Population Type". "Table-Incremental" and "Table-Update" are two of the options. I don't want to go with the "Table-Full" option as it might consume a lot of resources. What is the difference between these two ("Table-Incremental" and "Table-Update") options? Thank you. 

I receive database notification mail whenever a job fails. Error message of the failed job (Step Id=0 in the Job History) is included in the mail; 

There is a non-clustered index on Username column of the Member table. Plan cache shows an Implicit Conversion as such: 

One of the SQL Server 2008 R2 instances I administer is running on a two node Windows Cluster (Windows Server 2008 R2 Enterprise) When I run the DMV sys.dm_server_services, SQL Server Service Account shows as Y under the 'is_clustered' column. However, Agent Service Account is an 'N' for the same field 'is_clustered'. Is it something that I should be worried about and what might be causing this? Does this mean that Agent will not fail over? Thank you 

I'd like to know if it is possible to have a single passive node for two SQL Servers in a failover clustering deployment. For example, both active servers A and B will use server C as their contingent server. If it is apt to do so, will server C run two instances of SQL Server; one for A and one for B? As a side question; what is the benefit of "dynamic quorum" and "dynamic witness"? 

There are agent jobs with multiple steps in our servers and all their steps are defined as "go to the next step" "On Failure". So, even a job step fails, operator doesn't get notified because eventually the job succeeds. How can I modify all steps in all jobs so that job fails reporting failure if a step fails? edit: best way, I guess, would be to use msdb.dbo.sp_update_jobstep dynamically to update all steps where @on_fail_action !=2 Thanks all. 

I have a scheduled job which runs nightly. I want it to stop itself at 07:00AM in the morning whether or not it is completed. I have seen some duplicates in the site but they don't exactly address the problem. Thanks. 

We experience hundreds of sessions going in suspended state on rare occasions. When it happens there is no increase in terms of resource usage - CPU or memory. Rather there is a small amount of decrease 5-10% on CPU. There is no single error on the SQL log. I know this will be a blind question but what might be causing this? Any suggestions to check in SQL Server like plan cache etc..? 

It was tempdb contention. Adding more tempdb data files and enabling trace flag 1118 solved the issue. 

Query involving full text search is generating the following error message after restoring the database to a new server: 

Daily full backups start at 02:00 AM and takes around 1 hour to complete. Various metrics for the past 24 hours is as follows: 

I want to log the duration and time of user defined stored procedures each time they are invoked. I believe using extended events would be the way to go to achieve this. Can you please help me in defining the session and in querying the results? I am not quite sure about which event to add (sqlserver.rpc_completed?) and which target to choose (synchronous_event_counter,asynchronous_file_target or ring_buffer?). I also need help in querying the results (For example: grouping the result set so that each sp will show from top execution duration and execution time.) We use SQL Server 2008 R2.