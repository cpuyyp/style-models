Like this, when your host is down, icinga will retry each 1 hour () 5 times (). After, 5 hours you will be notified. But in inciga2 console, your host will be screened as down since the first hour (). Host down after 5 hours: In this case, you must specify and what you want in the others to be notified after 5 hours. 

If you have a mount, this part is ok. If you don't have a share, it's not necessary to test with psexec, it will fail. Moreover, be sure your ports are well forwarded, and yours firewalls are correctly configured for the port 135. 

or, for creating a new entry you can use And for the username, you can use the global variable %USERNAME%. With a GPO, you will be able to execute this script on all desired computer. . 

After, don't forget to restart your service. And test with to be sure your new port is correctly opened. 

To change the state of a host after 5 hours, you can play with the and parameters. In your question you don't specify if you want to be notified after 5 hours or if you want your host change state only after 5 hours. notified after 5 hours : For example, you can edit those paramters to have : 

When your master is failed the replication is over and interrupted. So you can switch the replication and so your secondary becomes the master and the master becomes the secundary. To switch the replication you can do that directly in the hyperv interface. 

If you want to install automaticcaly your updates without rebooting after, you can apply these registry rules : I show you the results of our GPO because my interface is not in english... 

3. NRPE arguments By default, NRPE not allow the send of arguments from Nagios to a remote client for security considerations. So, you must enable it in the nsclient.ini for each windows station. 

Otherwise, you can install NRPE on the remote server and execute commands with their results will be send to your icinga2 server. NRPE can be run on windows or linux. I think these two solutions are more simple than install icinga2 as a satellite on all your servers to be supervised. 

Because the block size of your hard drive is 512 bytes. And if you do 34x512 you will have 17408 bytes the size on your file system. And the IO block is the index of your block not his size 

With that, you will be able to execute remote commands on your remote server and the answer of this command will be send to your icinga2 server. This solution impose a ssh configuration between yous servers. 

If you don't pass any arguments to your check_nrpe, the server (windows client) will responde with his version number. 2. Testing your command On your windows client, you can test locally your command in a console with . If your command return good result, you can test from your nagios server without arguments : 

max_attempts is an old definition for services and hosts and it's no longer used in the nagios Core 4. See that to know the possibles definitions for yours objects: Objects definition With Icinga2 

In HOST-RESOURCES-MIB, you will be able to find the entry for the CPU usage. See $URL$ for the details of this MIB and his entries. It appears there is an entry for the disks and memory (in storage) and partitions too. You can use snmpwalk or a MIB Browser to navigate in the MIB of your server. 

It works in Client/Server mode and you can split the differents functions of bacula between severals servers. You can manage yours backup as you wish 

I have installed to send my logs to a graylog server. It works fine, but I have a denied permission on the logs of my HIDS Ossec. My process (launched by collector-sidecar) run as root : 

For check_memory you can test it on the host with differents outputs styles, you can see nsclient.ini.sample for some examples. And test with in a admin console 

It will give the number of waiting files, and more generally, which file... You can invert the source and destination to get the replication state of the other side. Edit comment You can use to test which replication is used. If the command return 'dfsr not initalized', you use FSR. 

Is Icinga2 runs on the same server of your MySQL service ? In this case you would have a problem in your command. Can you paste the detail of your command in your question. In other case, to test a Unix socket for mysql which not listen on a TCP port, you must use NRPE or SSH to connect to your mysql server and check the service. The result will be send to your icinga2 server. EDIT 1 : If you want to test a service which has not a listener on the network on a remote server, you can use several things : 

Maybe, your FTP traffic is NATted and not your SFTP traffic ? Can you verify on your router if the ports of your server are correctly natted to outside ? Can you join logs of the fail of the SFTP connction ? 

In your you specify : With that, will send a ping to each entry in . Moreover, you will ping all your domain for each member of it with the . So if you have a big domain it can explain your problem of quota. You can trie with : 

You can use log2timeline to export and parse the logs of your windows envronment. With that, you will be able to search and edit some timelines of interesting events. By this link you will find others tools to work on yours logs files. 

The TCP port 12489 is the default port for using check_nt not for all the services offered by nsclient. If you want to change the default port, you can do this in the file . You would have something like this : 

In somes cases, from a windows client in a domain, you must specify the machine in your login if the machine is not in the same domain. Ex: Like that, you force the authentication with the credentials stored in your debian box. 

If you have a 'yes' to these two questions, maybe your problem is from the DNS redirection on your DC. If you have a 'no' your problem is from the opened ports on your DC. 

You should install wireshark on your server and use tshark to save the traffic in pcap files with a rotating rule. For example : you will capture during 1 hour and create some pcap files with a size of 1 Mo 

But now, I'm blocked and i don't know to resolve this problem, have you got an idea of that ? Thanks, EDIT Well, today the service is running : 

The start (or the error) will be logged in the window events log. So you don't need to add a event trigger to survey the starting state of the first task. Now, the main problem of the task scheduler is when your task starts normally but the executed script has an error or generate a problem. In this case, the scheduler has done his job to start the task, the result of the script is not its problem. You must add in your script an error management. For logging problems in yours scripts, you can write the output in a file. For information, the event (id 201) give the return code of the executed script by the scheduler. EDIT 1 : The simpliest in my opinion is to include in yours scripts the send of mail which log the result of your script. The best is the installation of a supervision system which will survey the execution of the task and the results of the script 

You can add to your service an event-handler which will execute a script each time your service comes to non-ok state. Your script will be able to store for example the datas from a top command and a netstat or others tools () which shows the usage of your system. 

By default the routing is not activated. To activate routing on a linux you must add this line: net.ipv4.ip_forward = 1 In this file: /etc/sysctl.conf If you want to test you can activate the routing with this command: sysctl -w net.ipv4.ip_forward=1 

You could use the VMSnapshot applets. Example for retrieve the snappshots of a VM on HYPERV server : 

You should verify the default template of yours hosts and services. It's possible to have specified in those templates which are applied (by default) on yours services and hosts. It explains why in doesn't work. The priority is done in this order : 

To test if your folder is correctly shared and accessible from outside you czn try with a net use command : 

In your icinga2 configuration you must activate the performance data and select the broker (the soft which will treat yours performances datas sent by your check). icinga2.conf for example : 

I've never used graphite but from the tutorials on the web, it seems pnp works with graphite. pnp4nagios will wait icinga sends the perfdatas from the results of the checks which are in the right part of the pipe in the response. It's for that, you must activate the perfdata in the conf of icinga and explain to icinga2 which broker it will use for treating the perfdatas. When pnp4nagios receive the datas, it write them in files stored by default in . You will have a directory per host, and in it, you will two files for each service a xml and a rrd file. 

ok is the status and is the performances datas. Maybe you have a problem in the result of your command, it should return : 

To be sure of the synchronisation of your 2 servers and because you have under windows2012, you can use DFS for the sharing and DFS-R for the replication of your two servers. You could follow those simples steps for that : 1/ install and activate DFS replication (DFS-R) between the servers. When you are sure the initial replication is finished, all your files will be synchronised, and your user can be on any server, yours files will be the same. 2/ with DFS, you can create sharing which point to the two servers, with a priority on the new R:. 3/ You can migrate the users gradually. The old users point again to the ancient server. And the migrated users point to the DFS. 4/ When you finish to migrate all yours users, you can stop the replication, and delete the ancient server from your DFS. good luck ! Edit from my comment : If you want to save your share permissions and apply then to your new drive, you can work with the registry. Your share permissions are stored in the registry in this key :