You are being given no new work and then you write the above. The writing is on the wall. Start looking immediately for a new job, the most likley scenario here is that they are planning to offshore your job. I have seen this happen several times. 

What you have to do is be both firm and consistent in returning to the subject at hand. Firm doesn't have to be loud, it is more about the attitude with which you say things. A child can tell from tone of voice when a parent is serious and so can these guys. You can observe this at work in any riding stable, some little girls are kicking as hard as they can and the horse is ignoring them. Others just need a slight touch to get the horse to behave because they have learned to project their intent. If you are tentative, they will ignore you; if you come across as meaning it when you talk, they will pay more attention. This is something you can practice (first borrow a horse... no not really although it will help a lot if you have trouble with assertiveness). Insted of the horse, stand in front of a mirror and practice the phrases below (and in other answers) in different tones of voice until you get one that sounds firm. Then practice, practice, practice until it always sounds firm. In practicing, it helps to exaggerate, if you are tentative, purposely trying to be nasty may just move you far enough away from tentative to be assertive. Exaggeration is the natural way we learn things. You are at point A and want to get to point B but can't seem to get there, then try to get to point C which is beyond point B. Sometimes the problme is that point A and point B are farther apart than you think. So you are changing enough to get to Point A.2 but not to Point B. Get a friend to help you out with this after you practice with the mirror for awhile. You want to know how you are perceived not what you think you did. So what you do is interrupt them every single time they get off track. Her are some things you can say: 

Everyone has to judge for himself or herself, but those type of things that bring on that reaction show an attitude of lack of business sense or using employees badly or general immoral behavior that in my experience will reflect elsewhere as well. This is especially true when they reflect that finances might be less than stellar which is of particular concern when dealing with start ups (unless you want to risk not having a salary). What you have to do is get the sense of how serious the issue is and what the implications are. Financial issues and being asked to do something illegal (like being paid under the table) are the most serious because they more often than not reflect a business that is badly run and one that may get you in legal hot water. Better not to take the risk. Of course some of us are more risk adverse than others. So you have to learn to judge for yourself. Usually if there is a little voice telling you that something is wrong, you should listen though. You might miss some great places, but you will avoid a lot of really bad places. For instance, there is no reason whatsoever for a company to require you to buy your own equipment unless they can't afford to buy it. Yes they could make you happy by buying the system you want, but to put the risk on you and your equipment is simply unprofessional. A company that cares about its finances will not take the risk of having their mission critical information on computers they don't own. It shows a lack of business sense. It shows that they are not focused on more than the short-term. Sure some devs love to buy whatever they want, but that doesn't make it a good business practice. Now if they give you an allowance to buy what you want, that is very different than expecting you to bring your own equipment. Business is not about making developers happy but about making money, to have that level of risk indicates bad judgement. Now each person has to decide what indicates bad judgement to himself or herself personally. A real indicator of a horrible company is the type of thing they ask you to sign to be employed. If they want you to pay for your own equipment Without giving you the money for it and then want to be able own what is on that machine and wipe it out if you are fired or quit, well that tells you right there what they actually think about your employment. They want all the benefits and you take all the risks. You will see as you get more experience that when companies do such things, they show what the decision makers value. In this case, it clearly is not you. They expect you to spend thousands of dollars for equipment and then they expect that they own everything on the equipment. If you went to a car dealer and he told you that you had to pay a deposit to get the price on a car, would you buy a car there? Or would you question their judgement? This is the same type of thing. They are cheating you when they ask you to buy your own equipment. Well when people cheat once, they do tend to cheat more than once and about more than one thing. Ask yourself the implications of anything that makes you uneasy. If they are cutting corners there, where else might they be cutting corners and at what point does one thing you don't like indicate a bigger problem. (Nothing says you can't use this to ask about other things, some things are deal breakers, some are just warning signals.) There are no perfect jobs, you have to learn to evaluate and analyze what information you have to make a decision about whether this is place that you can live with. Personally I can't live with them passing the buck onto me to get the best equipment. Maybe you can. I can live with a less than stellar salary if the work is interesting, maybe you can't. We each individually decide what is important and what is a deal breaker. Remember if the corporate culture, as seen by what they are telling you as far as work conditions and benefits, makes you uneasy, then the likelihood that you will feel comfortable in this particular workplace is low. Some things aren't bad decisions for everyone but indicators of a thinking and decision making process you do not agree with. I've seen people stop an interview because they didn't like a question that was asked and certainly there are interview questions that could be asked that would make me get up and leave too. Other things may be of less importance but need you to ask further questions. In the end of the day it is all about trusting your own judgement based on what you heard. I can tell you that every bad job I ever took was clearly bad if I looked back at the signals I ignored during the interview. Over time, you develop more awareness of the subtle indicators and you are inclined to give them a higher priority in your job selection process. 

I know there are times that it can take very little exposure for a peanut allergy to kill. However, your co-workers may not be aware of the problem. What I would suggest doing is first going to your doctor and getting a medical assessment in writing of how at risk you are from people eating nuts near you. You may find you are less at risk than you think you are (schools tend to go overboard because children can't be relied on not to eat their peers peanut butter cookies, but as an adult that is not usually a problem) or you may find that you are more at risk than you think. If you have documentation of the problem, management is going to take you more seriously. Then I would pull together some research material on the issue. Make sure to include some cases where the person died from the exposure. Make sure it talks bout how little exposure can cause a severe reaction. Create some materials that give specific directions on how to use the Epi-pen (and where you personally keep it at the office) if you have severe reaction and what medical steps to take. You want to first be able to educate them on the issue and what your medical needs are. Even if they don't stop eating the peanuts, you certainly should make sure they know where the Epi-pen is and how to use it in an emergency. So at a minimum, you need to present this information to your co-workers. Then talk to your boss and ask him if you do a presentation of the research material, so your peers will know what to do to help avoid an emergency and how to deal with it if one occurrs. At this point you are not asking for anything except the chance to provide educational material about your condition to the others. At the end of the presentation, you could ask them what steps they think are appropriate to help protect your from the peanuts and give them a chance to eat them as well. As a group, you can come up with a solution. Once they understand the severity of the problem, they may be less likely to actually eat the peanuts near you. Now this approach requires that you talk openly about your medical condition. However, if you want an accomodation (whether official or unofficial) from your workplace, you really have to do that. 

In your resume concentrate on your accomplishments in the job not the language the application was written in. Talk about the complex financial report you created or the difficult troubleshooting problem, etc. Be clear on the business domain you have been working in and how your work impacts that. Talk about things like performance tuning if you did it. List Cobol in your skills, but put it last. Be prepared to answer technical questions about all the technologies you list. Come with examples of the personal projects for Web development you have created and it helps if you have Git portfolio. You can even put a personal projects section in your resume if you have room. Discuss that you want to transition to web programming as the reason why you are changing jobs in your interview or cover letter. 

You are not going to want to hear this but you need to talk to your boss as soon as possible. Make a meeting appointment for as soon as you can. Make the subject of the meeting be improving your performance. Go to him humbly and express how you feel you got off on the wrong foot and you need to repair the working relationship. Ask specifically what you need to do to improve in his or her eyes. Then do those things even if you don't agree with them. This is about perception and your boss perceives you as not doing well, so you need to find out what you need to do to improve his or her perception. You need to specifically ask why you are being kept out of team meetings and new projects. You need to listen without objecting to everything negative he has to say about you and then you need to take whatever steps it takes to improve this relationship. At this point you cannot afford to argue any of his/her points. You need to adjust to his/her expectations. Period. Once you have regained a measure of trust, then you can have professional disagreements or discuss differences of opinion, right now you have lost that luxury. Given that this has gone on for several months, it may not be possible to salvage this. It will depend on what your boss has to say. Another option, depending on the size of the company, is to request a transfer to another boss after you talk to the current one and try to work it out. He/She may be willing to let you go elsewhere in the company since you don't seem to be contributing much to his/her team anyway and transferring you gives him/her an opening he/she can fill. Talk to him about the cultural issue as well. You are in a new country, you need to understand how business in that country is done. Now for the future, you made two huge mistakes here that you need to not repeat. The first was in starting to avoid your boss. You need to learn to deal with people who make you uncomfortable or who do not communicate in your preferred style. If the person is the boss, avoiding communicating with that person is one of the worst things you can do. You have let this poor initial perception go on too long. You should have addressed it immediately even if the conversation was uncomfortable. Your boss has the power to affect your assignments, your performance appraisal and your raises. He/She is the single most important person in the work world for you. It should be your absolute first priority to get along with your boss. The second huge mistake was in telling a peer about your problems that you had not fixed them with the boss. In most offices, it is highly likely the word that you were unhappy would have filtered back to him/her and by doing this, you made him/her look bad. Never make your boss look bad. Learn from these mistakes and don't repeat them.